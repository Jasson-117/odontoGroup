
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>facturas</title>
</head>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">

<body style="font-weight: bold">
<nav class="navbar navbar-expand-md bg-dark navbar-dark" style="padding-left: 80px">
    <a class="navbar-brand" th:href="@{/facturas}">Registro de facturas
        <a>
            <div class="collapse navbar-collapse" id="collapsibleNavbar">
                <ul class="navbar-nav">

                    <li class="nav-item">
                        <a class="nav-link"
                           th:href="@{/clientes}">Registro de clientes
                        </a>
                    </li>

                    <li class="nav-item" style="padding-left: 900px">
                        <a class="nav-link"
                           th:href="@{/usuarios/crear}">Registro de usuarios
                        </a>
                    </li>
                </ul>
            </div>
 </nav>
<div class="container">
    <div class="row">
        <h1>Facturas</h1>
    </div>
    <br>
    <div class="row">
        <div class="col-lg-3">
            <a class="btn btn-primary btn-sm mb3" th:href="@{/facturas/crear}">CREAR FACTURA</a>
        </div>
    </div>
    <form id="myForm" method="GET">
        <div class="form-group">
            <label>DESDE:</label>
            <input type="date" name="id" id="idInput" class="form-control" required>
        </div>
        <div class="form-group">
            <label>HASTA:</label>
            <input type="date" name="id2" id="id2Input" class="form-control" required>
        </div>
        <div class="box-footer">
            <button type="submit" class="btn btn-success">BUSCAR</button>
        </div>
    </form>
    <br>

    <table class="table table-striped table-bordered">
        <thead class="table-dark">
        <tr>
            <th scope="col">Id_factura</th>
            <th scope="col">prospecto</th>
            <th scope="col">id_cliente</th>
            <th scope="col">nombreCliente</th>
            <th scope="col">nombreVendedor</th>
            <th scope="col">id_vendedor</th>
            <th scope="col">fecha</th>
            <th scope="col">total</th>
            <th scope="col">acciones</th>





        </tr>
        </thead>
        <tbody class="table-group-divider">
        <tr th:each="factura : ${facturas}">

            <td th:text="${factura.factura_id}">Id_factura</td>
            <td th:text="${factura.prospecto}">prospecto</td>
            <td th:text="${factura.id_cliente}">id_cliente</td>
            <td th:text="${factura.nombreCliente}">nombreCliente</td>
            <td th:text="${factura.nombreVendedor}">nombreVendedor</td>
            <td th:text="${factura.id_vendedor}">id_vendedor</td>
            <td th:text="${factura.fecha}">fecha</td>
            <td th:text="${factura.total}">total</td>

            <td>
                <a th:href="@{/facturas/modificar/{id}(id=${factura.factura_id})}" class="btn btn-info">Editar</a>
                <a th:href="@{/eliminarFacturas/{id}(id=${factura.factura_id})}" class="btn btn-danger">Eliminar</a>
                <a style="background: coral" th:href="@{/facturas/pdf/{id}(id=${factura.factura_id})}" class="btn btn-danger">Imprimir</a>

            </td>


        </tr>

    </table>
</div>
<script>
    document.getElementById("myForm").addEventListener("submit", function(event) {
        event.preventDefault(); // Evita que el formulario se envíe de inmediato

        // Obtén los valores de los campos de entrada
        var idValue = document.getElementById("idInput").value;
        var id2Value = document.getElementById("id2Input").value;

        // Modifica la acción del formulario con los valores capturados en la URL deseada
        this.action = "/facturas/" + idValue + "/" + id2Value;

        // Envía el formulario
        this.submit();
    });
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>

</body>
</html>